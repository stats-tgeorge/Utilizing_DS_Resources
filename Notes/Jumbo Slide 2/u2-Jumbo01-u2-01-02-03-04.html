<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data and visualisation</title>
    <meta charset="utf-8" />
    <meta name="author" content="datasciencebox.org" />
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link rel="stylesheet" href="../xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="../slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data and visualisation
## <br><br> Data Science in a Box
### <a href="https://datasciencebox.org/%20Modified%20by%20Tyler%20George">datasciencebox.org</a>

---





layout: true
  
&lt;div class="my-footer"&gt;
&lt;span&gt;
&lt;a href="https://datasciencebox.org" target="_blank"&gt;datasciencebox.org&lt;/a&gt;
&lt;/span&gt;
&lt;/div&gt; 

---



.your-turn[
.light-blue[.hand[Your turn:]] `AE 02 - Bechdel`
- [The Bechdel test](https://en.wikipedia.org/wiki/Bechdel_test) asks whether a work of fiction features at least two women who talk to each other about something other than a man, and there must be two women named characters.
- Go to our RStudio Server and start `AE 02 - Bechdel`. You will need to start an R project from the repository.
- Open and knit the R Markdown document `bechdel.Rmd`, review the document, and fill in the blanks.
]

---

class: middle

# What is in a dataset?

---

## Dataset terminology

- Each row is an **observation**
- Each column is a **variable**

.small[


```r
starwars
```

```
## # A tibble: 87 x 14
##   name    height  mass hair_color skin_color eye_color birth_year
##   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
## 1 Luke S~    172    77 blond      fair       blue            19  
## 2 C-3PO      167    75 &lt;NA&gt;       gold       yellow         112  
## 3 R2-D2       96    32 &lt;NA&gt;       white, bl~ red             33  
## 4 Darth ~    202   136 none       white      yellow          41.9
## 5 Leia O~    150    49 brown      light      brown           19  
## 6 Owen L~    178   120 brown, gr~ light      blue            52  
## # ... with 81 more rows, and 7 more variables: sex &lt;chr&gt;,
## #   gender &lt;chr&gt;, homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;
```

]

---

## Luke Skywalker

![luke-skywalker](img/luke-skywalker.png)

---

## What's in the Star Wars data?

Take a `glimpse` at the data:


```r
glimpse(starwars)
```

```
## Rows: 87
## Columns: 14
## $ name       &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth V~
## $ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 1~
## $ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, ~
## $ hair_color &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, gr~
## $ skin_color &lt;chr&gt; "fair", "gold", "white, blue", "white", "lig~
## $ eye_color  &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", ~
## $ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, N~
## $ sex        &lt;chr&gt; "male", "none", "none", "male", "female", "m~
## $ gender     &lt;chr&gt; "masculine", "masculine", "masculine", "masc~
## $ homeworld  &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine",~
## $ species    &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human",~
## $ films      &lt;list&gt; &lt;"The Empire Strikes Back", "Revenge of the~
## $ vehicles   &lt;list&gt; &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;~
## $ starships  &lt;list&gt; &lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TI~
```

---

.question[
How many rows and columns does this dataset have?
What does each row represent?
What does each column represent?
]


```r
?starwars
```

&lt;img src="img/starwars-help.png" width="60%" style="display: block; margin: auto;" /&gt;

---

.question[
How many rows and columns does this dataset have?
]

.pull-left[

```r
nrow(starwars) # number of rows
```

```
## [1] 87
```

```r
ncol(starwars) # number of columns
```

```
## [1] 14
```

```r
dim(starwars)  # dimensions (row column)
```

```
## [1] 87 14
```
]

---

class: middle

# Exploratory data analysis

---

## What is EDA?

- Exploratory data analysis (EDA) is an approach to analysing data sets to summarize its main characteristics
- Often, this is visual -- this is what we'll focus on first
- But we might also calculate summary statistics and perform data wrangling/manipulation/transformation at (or before) this stage of the analysis -- this is what we'll focus on next

---

## Mass vs. height

.question[ 
How would you describe the relationship between mass and height of Starwars characters?
What other variables would help us understand data points that don't follow the overall trend?
Who is the not so tall but really chubby character?
]

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-7-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

## Jabba!

&lt;img src="img/jabbaplot.png" width="80%" style="display: block; margin: auto;" /&gt;

---

class: middle

# Data visualization

---

## Data visualization

&gt; *"The simple graph has brought more information to the data analyst's mind than any other device." --- John Tukey*

- Data visualization is the creation and study of the visual representation of data
- Many tools for visualizing data -- R is one of them
- Many approaches/systems within R for making data visualizations -- **ggplot2** is one of them, and that's what we're going to use

---

## ggplot2 `\(\in\)` tidyverse

.pull-left[
&lt;img src="img/ggplot2-part-of-tidyverse.png" width="80%" style="display: block; margin: auto;" /&gt;
] 
.pull-right[ 
- **ggplot2** is tidyverse's data visualization package 
- `gg` in "ggplot2" stands for Grammar of Graphics 
- Inspired by the book **Grammar of Graphics** by Leland Wilkinson
]

---

## Grammar of Graphics

.pull-left-narrow[
A grammar of graphics is a tool that enables us to concisely describe the components of a graphic
]
.pull-right-wide[
&lt;img src="img/grammar-of-graphics.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.footnote[ Source: [BloggoType](http://bloggotype.blogspot.com/2016/08/holiday-notes2-grammar-of-graphics.html)]

---

## Mass vs. height


```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/mass-height-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

.question[ 
- What are the functions doing the plotting?
- What is the dataset being plotted?
- Which variables map to which features (aesthetics) of the plot?
- What does the warning mean?&lt;sup&gt;+&lt;/sup&gt;
]


```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

.footnote[
&lt;sup&gt;+&lt;/sup&gt;Suppressing warning to subsequent slides to save space
]

---

## Hello ggplot2!

.pull-left-wide[
- `ggplot()` is the main function in ggplot2
- Plots are constructed in layers
- Structure of the code for plots can be summarized as


```r
ggplot(data = [dataset], 
       mapping = aes(x = [x-variable], y = [y-variable])) +
   geom_xxx() +
   other options
```

- The ggplot2 package comes with the tidyverse


```r
library(tidyverse)
```

- For help with ggplot2, see [ggplot2.tidyverse.org](http://ggplot2.tidyverse.org/)
]

---

class: middle

# Why do we visualize?

---

## Anscombe's quartet



.pull-left[

```
##    set  x     y
## 1    I 10  8.04
## 2    I  8  6.95
## 3    I 13  7.58
## 4    I  9  8.81
## 5    I 11  8.33
## 6    I 14  9.96
## 7    I  6  7.24
## 8    I  4  4.26
## 9    I 12 10.84
## 10   I  7  4.82
## 11   I  5  5.68
## 12  II 10  9.14
## 13  II  8  8.14
## 14  II 13  8.74
## 15  II  9  8.77
## 16  II 11  9.26
## 17  II 14  8.10
## 18  II  6  6.13
## 19  II  4  3.10
## 20  II 12  9.13
## 21  II  7  7.26
## 22  II  5  4.74
```
] 
.pull-right[

```
##    set  x     y
## 23 III 10  7.46
## 24 III  8  6.77
## 25 III 13 12.74
## 26 III  9  7.11
## 27 III 11  7.81
## 28 III 14  8.84
## 29 III  6  6.08
## 30 III  4  5.39
## 31 III 12  8.15
## 32 III  7  6.42
## 33 III  5  5.73
## 34  IV  8  6.58
## 35  IV  8  5.76
## 36  IV  8  7.71
## 37  IV  8  8.84
## 38  IV  8  8.47
## 39  IV  8  7.04
## 40  IV  8  5.25
## 41  IV 19 12.50
## 42  IV  8  5.56
## 43  IV  8  7.91
## 44  IV  8  6.89
```
]

???

What are these variables?

?anscombe

What if we want to find the average of x for each set? 

---

## Summarising Anscombe's quartet


```r
quartet %&gt;%
  group_by(set) %&gt;%
  summarise(
    mean_x = mean(x), 
    mean_y = mean(y),
    sd_x = sd(x),
    sd_y = sd(y),
    r = cor(x, y)
  )
```

```
## # A tibble: 4 x 6
##   set   mean_x mean_y  sd_x  sd_y     r
##   &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 I          9   7.50  3.32  2.03 0.816
## 2 II         9   7.50  3.32  2.03 0.816
## 3 III        9   7.5   3.32  2.03 0.816
## 4 IV         9   7.50  3.32  2.03 0.817
```

---

## Visualizing Anscombe's quartet

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/quartet-plot-1.png" width="80%" style="display: block; margin: auto;" /&gt;

---

## Age at first kiss

.question[ 
Do you see anything out of the ordinary?
]

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-14-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Facebook visits

.question[ 
How are people reporting lower vs. higher values of FB visits?
]

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-15-1.png" width="60%" style="display: block; margin: auto;" /&gt;

# ggplot2 ‚ù§Ô∏è üêß

---

## ggplot2 `\(\in\)` tidyverse

.pull-left[
&lt;img src="img/ggplot2-part-of-tidyverse.png" width="80%" style="display: block; margin: auto;" /&gt;
] 
.pull-right[ 
- **ggplot2** is tidyverse's data visualization package 
- Structure of the code for plots can be summarized as


```r
ggplot(data = [dataset], 
       mapping = aes(x = [x-variable], 
                     y = [y-variable])) +
   geom_xxx() +
   other options
```
]

---

## Data: Palmer Penguins

Measurements for penguin species, island in Palmer Archipelago, size (flipper length, body mass, bill dimensions), and sex.

.pull-left-narrow[
&lt;img src="img/penguins.png" width="80%" style="display: block; margin: auto;" /&gt;
]
.pull-right-wide[

```r
library(palmerpenguins)
glimpse(penguins)
```

```
## Rows: 344
## Columns: 8
## $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adeli~
## $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torg~
## $ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.~
## $ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.~
## $ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195~
## $ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 362~
## $ sex               &lt;fct&gt; male, female, female, NA, female, mal~
## $ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2~
```
]

---

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-20-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]


```r
ggplot(data = penguins, 
       mapping = aes(x = bill_depth_mm, y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
       x = "Bill depth (mm)", y = "Bill length (mm)",
       colour = "Species")
```

```
## Warning: Removed 2 rows containing missing values (geom_point).
```
]
]

---

class: middle

# Coding out loud

---

.midi[
&gt; **Start with the `penguins` data frame**
]

.pull-left[

```r
*ggplot(data = penguins)
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-21-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; **map bill depth to the x-axis**
]

.pull-left[

```r
ggplot(data = penguins,
*      mapping = aes(x = bill_depth_mm))
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-22-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; **and map bill length to the y-axis.**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
*                    y = bill_length_mm))
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-23-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; **Represent each observation with a point**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm)) + 
* geom_point()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-24-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; **and map species to the colour of each point.**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
*                    colour = species)) +
  geom_point()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-25-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; and map species to the colour of each point.
&gt; **Title the plot "Bill depth and length"**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
* labs(title = "Bill depth and length")
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-26-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; and map species to the colour of each point.
&gt; Title the plot "Bill depth and length", 
&gt; **add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins"**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
*      subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins")
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-27-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; and map species to the colour of each point.
&gt; Title the plot "Bill depth and length", 
&gt; add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", 
&gt; **label the x and y axes as "Bill depth (mm)" and "Bill length (mm)", respectively**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
*      x = "Bill depth (mm)", y = "Bill length (mm)")
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-28-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; and map species to the colour of each point.
&gt; Title the plot "Bill depth and length", 
&gt; add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", 
&gt; label the x and y axes as "Bill depth (mm)" and "Bill length (mm)", respectively,
&gt; **label the legend "Species"**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
       x = "Bill depth (mm)", y = "Bill length (mm)",
*      colour = "Species")
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-29-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; and map species to the colour of each point.
&gt; Title the plot "Bill depth and length", 
&gt; add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", 
&gt; label the x and y axes as "Bill depth (mm)" and "Bill length (mm)", respectively,
&gt; label the legend "Species", 
&gt; **and add a caption for the data source.**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
       x = "Bill depth (mm)", y = "Bill length (mm)",
       colour = "Species",
*      caption = "Source: Palmer Station LTER / palmerpenguins package")
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-30-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.midi[
&gt; Start with the `penguins` data frame,
&gt; map bill depth to the x-axis
&gt; and map bill length to the y-axis. 
&gt; Represent each observation with a point
&gt; and map species to the colour of each point.
&gt; Title the plot "Bill depth and length", 
&gt; add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", 
&gt; label the x and y axes as "Bill depth (mm)" and "Bill length (mm)", respectively,
&gt; label the legend "Species", 
&gt; and add a caption for the data source.
&gt; **Finally, use a discrete colour scale that is designed to be perceived by viewers with common forms of colour blindness.**
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
       x = "Bill depth (mm)", y = "Bill length (mm)",
       colour = "Species",
       caption = "Source: Palmer Station LTER / palmerpenguins package") +
* scale_colour_viridis_d()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-31-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-32-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]


```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  labs(title = "Bill depth and length",
       subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins",
       x = "Bill depth (mm)", y = "Bill length (mm)",
       colour = "Species",
       caption = "Source: Palmer Station LTER / palmerpenguins package") +
  scale_colour_viridis_d()
```

```
## Warning: Removed 2 rows containing missing values (geom_point).
```
]
.panel[.panel-name[Narrative]
.pull-left-wide[
.midi[
Start with the `penguins` data frame,
map bill depth to the x-axis
and map bill length to the y-axis. 

Represent each observation with a point
and map species to the colour of each point.

Title the plot "Bill depth and length", 
add the subtitle "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", 
label the x and y axes as "Bill depth (mm)" and "Bill length (mm)", respectively,
label the legend "Species", 
and add a caption for the data source.

Finally, use a discrete colour scale that is designed to be perceived by viewers with common forms of colour blindness.
]
]
]
]

---

## Argument names

.tip[
You can omit the names of first two arguments when building plots with `ggplot()`.
]

.pull-left[

```r
ggplot(data = penguins,
       mapping = aes(x = bill_depth_mm,
                     y = bill_length_mm,
                     colour = species)) +
  geom_point() +
  scale_colour_viridis_d()
```
]
.pull-right[

```r
ggplot(penguins,
       aes(x = bill_depth_mm,
           y = bill_length_mm,
           colour = species)) +
  geom_point() +
  scale_colour_viridis_d()
```
]

---

class: middle

# Aesthetics

---

## Aesthetics options

Commonly used characteristics of plotting characters that can be **mapped to a specific variable** in the data are

- `colour`
- `shape`
- `size`
- `alpha` (transparency)

---

## Colour

.pull-left[

```r
ggplot(penguins,
       aes(x = bill_depth_mm, 
           y = bill_length_mm,
*          colour = species)) +
  geom_point() +
  scale_colour_viridis_d()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-33-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Shape

Mapped to a different variable than `colour`

.pull-left[

```r
ggplot(penguins,
       aes(x = bill_depth_mm, 
           y = bill_length_mm,
           colour = species,
*          shape = island)) +
  geom_point() +
  scale_colour_viridis_d()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-34-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Shape

Mapped to same variable as `colour`

.pull-left[

```r
ggplot(penguins,
       aes(x = bill_depth_mm, 
           y = bill_length_mm,
           colour = species,
*          shape = species)) +
  geom_point() +
  scale_colour_viridis_d()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-35-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Size

.pull-left[

```r
ggplot(penguins,
       aes(x = bill_depth_mm, 
           y = bill_length_mm,
           colour = species,
           shape = species,
*          size = body_mass_g)) +
  geom_point() +
  scale_colour_viridis_d()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-36-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Alpha

.pull-left[

```r
ggplot(penguins,
       aes(x = bill_depth_mm, 
           y = bill_length_mm,
           colour = species,
           shape = species,
           size = body_mass_g,
*          alpha = flipper_length_mm)) +
  geom_point() +
  scale_colour_viridis_d()
```
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-37-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
**Mapping**


```r
ggplot(penguins,
       aes(x = bill_depth_mm,
           y = bill_length_mm,
*          size = body_mass_g,
*          alpha = flipper_length_mm)) +
  geom_point()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-38-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
.pull-right[
**Setting**


```r
ggplot(penguins,
       aes(x = bill_depth_mm,
           y = bill_length_mm)) + 
* geom_point(size = 2, alpha = 0.5)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-39-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Mapping vs. setting

- **Mapping:** Determine the size, alpha, etc. of points based on the values of a variable in the data
  - goes into `aes()`

- **Setting:** Determine the size, alpha, etc. of points **not** based on the values of a variable in the data
  - goes into `geom_*()` (this was `geom_point()` in the previous example, but we'll learn about other geoms soon!)
  
---

class: middle

# Faceting

---

## Faceting

- Smaller plots that display different subsets of the data
- Useful for exploring conditional relationships and large data

---

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-40-1.png" width="70%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]


```r
ggplot(penguins, aes(x = bill_depth_mm, y = bill_length_mm)) + 
  geom_point() +
* facet_grid(species ~ island)
```

```
## Warning: Removed 2 rows containing missing values (geom_point).
```
]
]

---

## Various ways to facet

.question[
In the next few slides describe what each plot displays. Think about how the code relates to the output.

**Note:** The plots in the next few slides do not have proper titles, axis labels, etc. because we want you to figure out what's happening in the plots.
But you should always label your plots!
]

---


```r
ggplot(penguins, aes(x = bill_depth_mm, y = bill_length_mm)) + 
  geom_point() +
* facet_grid(species ~ sex)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-41-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(penguins, aes(x = bill_depth_mm, y = bill_length_mm)) + 
  geom_point() +
* facet_grid(sex ~ species)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-42-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(penguins, aes(x = bill_depth_mm, y = bill_length_mm)) + 
  geom_point() +
* facet_wrap(~ species)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-43-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(penguins, aes(x = bill_depth_mm, y = bill_length_mm)) + 
  geom_point() +
* facet_grid(. ~ species)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-44-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---


```r
ggplot(penguins, aes(x = bill_depth_mm, y = bill_length_mm)) + 
  geom_point() +
* facet_wrap(~ species, ncol = 2)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-45-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Faceting summary

- `facet_grid()`:
    - 2d grid
    - `rows ~ cols`
    - use `.` for no split
- `facet_wrap()`: 1d ribbon wrapped according to number of rows and columns specified or available plotting area

---

## Facet and color

.pull-left-narrow[

```r
ggplot(
  penguins, 
  aes(x = bill_depth_mm, 
      y = bill_length_mm, 
*     color = species)) +
  geom_point() +
  facet_grid(species ~ sex) +
* scale_color_viridis_d()
```
]
.pull-right-wide[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-46-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Face and color, no legend

.pull-left-narrow[

```r
ggplot(
  penguins, 
  aes(x = bill_depth_mm, 
      y = bill_length_mm, 
      color = species)) +
  geom_point() +
  facet_grid(species ~ sex) +
  scale_color_viridis_d() +
* guides(color = FALSE)
```
]
.pull-right-wide[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-47-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]


# Terminology

---

## Number of variables involved

- Univariate data analysis - distribution of single variable
- Bivariate data analysis - relationship between two variables
- Multivariate data analysis - relationship between many variables at once, usually focusing on the relationship between two while conditioning for others

---

## Types of variables

- **Numerical variables** can be classified as **continuous** or **discrete** based on whether or not the variable can take on an infinite number of values or only non-negative whole numbers, respectively.
- If the variable is **categorical**, we can determine if it is **ordinal** based on whether or not the levels have a natural ordering.

---

class: middle

# Data

---

## Data: Lending Club

.pull-left-wide[

- Thousands of loans made through the Lending Club, which is a platform that allows individuals to lend to other individuals

- Not all loans are created equal -- ease of getting a loan depends on (apparent) ability to pay back the loan

- Data includes loans *made*, these are not loan applications
]
.pull-right-narrow[
&lt;img src="img/lending-club.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Take a peek at data


```r
library(openintro)
glimpse(loans_full_schema)
```

```
## Rows: 10,000
## Columns: 55
## $ emp_title                        &lt;chr&gt; "global config enginee~
## $ emp_length                       &lt;dbl&gt; 3, 10, 3, 1, 10, NA, 1~
## $ state                            &lt;fct&gt; NJ, HI, WI, PA, CA, KY~
## $ homeownership                    &lt;fct&gt; MORTGAGE, RENT, RENT, ~
## $ annual_income                    &lt;dbl&gt; 90000, 40000, 40000, 3~
## $ verified_income                  &lt;fct&gt; Verified, Not Verified~
## $ debt_to_income                   &lt;dbl&gt; 18.01, 5.04, 21.15, 10~
## $ annual_income_joint              &lt;dbl&gt; NA, NA, NA, NA, 57000,~
## $ verification_income_joint        &lt;fct&gt; , , , , Verified, , No~
## $ debt_to_income_joint             &lt;dbl&gt; NA, NA, NA, NA, 37.66,~
## $ delinq_2y                        &lt;int&gt; 0, 0, 0, 0, 0, 1, 0, 1~
## $ months_since_last_delinq         &lt;int&gt; 38, NA, 28, NA, NA, 3,~
## $ earliest_credit_line             &lt;dbl&gt; 2001, 1996, 2006, 2007~
## $ inquiries_last_12m               &lt;int&gt; 6, 1, 4, 0, 7, 6, 1, 1~
## $ total_credit_lines               &lt;int&gt; 28, 30, 31, 4, 22, 32,~
## $ open_credit_lines                &lt;int&gt; 10, 14, 10, 4, 16, 12,~
...
```

---

## Selected variables


```r
loans &lt;- loans_full_schema %&gt;%
  select(loan_amount, interest_rate, term, grade, 
         state, annual_income, homeownership, debt_to_income)
glimpse(loans)
```

```
## Rows: 10,000
## Columns: 8
## $ loan_amount    &lt;int&gt; 28000, 5000, 2000, 21600, 23000, 5000, 2~
## $ interest_rate  &lt;dbl&gt; 14.07, 12.61, 17.09, 6.72, 14.07, 6.72, ~
## $ term           &lt;dbl&gt; 60, 36, 36, 36, 36, 36, 60, 60, 36, 36, ~
## $ grade          &lt;ord&gt; C, C, D, A, C, A, C, B, C, A, C, B, C, B~
## $ state          &lt;fct&gt; NJ, HI, WI, PA, CA, KY, MI, AZ, NV, IL, ~
## $ annual_income  &lt;dbl&gt; 90000, 40000, 40000, 30000, 35000, 34000~
## $ homeownership  &lt;fct&gt; MORTGAGE, RENT, RENT, RENT, RENT, OWN, M~
## $ debt_to_income &lt;dbl&gt; 18.01, 5.04, 21.15, 10.16, 57.96, 6.46, ~
```

---

## Selected variables

&lt;br&gt;

.midi[
variable        | description
----------------|-------------
`loan_amount`   |	Amount of the loan received, in US dollars
`interest_rate` |	Interest rate on the loan, in an annual percentage
`term`	        | The length of the loan, which is always set as a whole number of months
`grade`	        | Loan grade, which takes a values A through G and represents the quality of the loan and its likelihood of being repaid
`state`         |	US state where the borrower resides
`annual_income` |	Borrower‚Äôs annual income, including any second income, in US dollars
`homeownership`	| Indicates whether the person owns, owns but has a mortgage, or rents
`debt_to_income` | Debt-to-income ratio
]

---

## Variable types

&lt;br&gt;

variable        | type
----------------|-------------
`loan_amount`   |	numerical, continuous
`interest_rate` |	numerical, continuous
`term`	        | numerical, discrete
`grade`	        | categorical, ordinal
`state`         |	categorical, not ordinal
`annual_income` |	numerical, continuous
`homeownership`	| categorical, not ordinal
`debt_to_income` | numerical, continuous

---

class: middle

# Visualizing numerical data

---

## Describing shapes of numerical distributions

- shape:
    - skewness: right-skewed, left-skewed, symmetric (skew is to the side of the longer tail)
    - modality: unimodal, bimodal, multimodal, uniform
- center: mean (`mean`), median (`median`), mode (not always useful)
- spread: range (`range`), standard deviation (`sd`), inter-quartile range (`IQR`)
- unusual observations

---

class: middle

# Histogram

---

## Histogram


```r
ggplot(loans, aes(x = loan_amount)) +
  geom_histogram()
```

```
## `stat_bin()` using `bins = 30`. Pick better value with
## `binwidth`.
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-51-1.png" width="50%" style="display: block; margin: auto;" /&gt;

---

## Histograms and binwidth

.panelset[
.panel[.panel-name[binwidth = 1000]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_histogram(binwidth = 1000)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-52-1.png" width="50%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[binwidth = 5000]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_histogram(binwidth = 5000)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-53-1.png" width="50%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[binwidth = 20000]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_histogram(binwidth = 20000)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-54-1.png" width="50%" style="display: block; margin: auto;" /&gt;
]
]

---

## Customizing histograms

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-55-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_histogram(binwidth = 5000) +
* labs(
*   x = "Loan amount ($)",
*   y = "Frequency",
*   title = "Amounts of Lending Club loans"
* )
```
]
]

---

## Fill with a categorical variable

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-56-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = loan_amount, 
*                 fill = homeownership)) +
  geom_histogram(binwidth = 5000,
*                alpha = 0.5) +
  labs(
    x = "Loan amount ($)",
    y = "Frequency",
    title = "Amounts of Lending Club loans"
  )
```
]
]

---

## Facet with a categorical variable

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-57-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = loan_amount, fill = homeownership)) + 
  geom_histogram(binwidth = 5000) +
  labs(
    x = "Loan amount ($)",
    y = "Frequency",
    title = "Amounts of Lending Club loans"
  ) +
* facet_wrap(~ homeownership, nrow = 3)
```
]
]

---

class: middle

# Density plot

---

## Density plot


```r
ggplot(loans, aes(x = loan_amount)) +
  geom_density()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-58-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Density plots and adjusting bandwidth

.panelset[
.panel[.panel-name[adjust = 0.5]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_density(adjust = 0.5)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-59-1.png" width="50%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[adjust = 1]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_density(adjust = 1) # default bandwidth
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-60-1.png" width="50%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[adjust = 2]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_density(adjust = 2)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-61-1.png" width="50%" style="display: block; margin: auto;" /&gt;
]
]

---

## Customizing density plots

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-62-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = loan_amount)) +
  geom_density(adjust = 2) +
* labs(
*   x = "Loan amount ($)",
*   y = "Density",
*   title = "Amounts of Lending Club loans"
* )
```
]
]

---

## Adding a categorical variable

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-63-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = loan_amount, 
*                 fill = homeownership)) +
  geom_density(adjust = 2, 
*              alpha = 0.5) +
  labs(
    x = "Loan amount ($)",
    y = "Density",
    title = "Amounts of Lending Club loans", 
*   fill = "Homeownership"
  )
```
]
]

---

class: middle

# Box plot

---

## Box plot


```r
ggplot(loans, aes(x = interest_rate)) +
  geom_boxplot()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-64-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Box plot and outliers


```r
ggplot(loans, aes(x = annual_income)) +
  geom_boxplot()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-65-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Customizing box plots

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-66-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = interest_rate)) +
  geom_boxplot() +
  labs(
    x = "Interest rate (%)",
    y = NULL,
    title = "Interest rates of Lending Club loans"
  ) +
* theme(
*   axis.ticks.y = element_blank(),
*   axis.text.y = element_blank()
* )
```
]
]

---

## Adding a categorical variable

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-67-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
ggplot(loans, aes(x = interest_rate,
*                 y = grade)) +
  geom_boxplot() +
  labs(
    x = "Interest rate (%)",
    y = "Grade",
    title = "Interest rates of Lending Club loans",
*   subtitle = "by grade of loan"
  )
```
]
]

---

class: middle

# Relationships numerical variables

---

## Scatterplot


```r
ggplot(loans, aes(x = debt_to_income, y = interest_rate)) +
  geom_point()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-68-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Hex plot


```r
ggplot(loans, aes(x = debt_to_income, y = interest_rate)) +
  geom_hex()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-69-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Hex plot


```r
ggplot(loans %&gt;% filter(debt_to_income &lt; 100), 
       aes(x = debt_to_income, y = interest_rate)) +
  geom_hex()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-70-1.png" width="60%" style="display: block; margin: auto;" /&gt;


# Recap

---

## Variables

- **Numerical** variables can be classified as **continuous** or **discrete** based on whether or not the variable can take on an infinite number of values or only non-negative whole numbers, respectively.
- If the variable is **categorical**, we can determine if it is **ordinal** based on whether or not the levels have a natural ordering.

---

### Data 


```r
library(openintro)
loans &lt;- loans_full_schema %&gt;%
  select(loan_amount, interest_rate, term, grade, 
         state, annual_income, homeownership, debt_to_income)
glimpse(loans)
```

```
## Rows: 10,000
## Columns: 8
## $ loan_amount    &lt;int&gt; 28000, 5000, 2000, 21600, 23000, 5000, 2~
## $ interest_rate  &lt;dbl&gt; 14.07, 12.61, 17.09, 6.72, 14.07, 6.72, ~
## $ term           &lt;dbl&gt; 60, 36, 36, 36, 36, 36, 60, 60, 36, 36, ~
## $ grade          &lt;ord&gt; C, C, D, A, C, A, C, B, C, A, C, B, C, B~
## $ state          &lt;fct&gt; NJ, HI, WI, PA, CA, KY, MI, AZ, NV, IL, ~
## $ annual_income  &lt;dbl&gt; 90000, 40000, 40000, 30000, 35000, 34000~
## $ homeownership  &lt;fct&gt; MORTGAGE, RENT, RENT, RENT, RENT, OWN, M~
## $ debt_to_income &lt;dbl&gt; 18.01, 5.04, 21.15, 10.16, 57.96, 6.46, ~
```

---

class: middle

# Bar plot

---

## Bar plot


```r
ggplot(loans, aes(x = homeownership)) +
  geom_bar()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-72-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Segmented bar plot


```r
ggplot(loans, aes(x = homeownership, 
*                 fill = grade)) +
  geom_bar()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-73-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Segmented bar plot


```r
ggplot(loans, aes(x = homeownership, fill = grade)) +
* geom_bar(position = "fill")
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-74-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

.question[
Which bar plot is a more useful representation for visualizing the relationship between homeownership and grade?
]

.pull-left[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-75-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]
.pull-right[
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-76-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## Customizing bar plots

.panelset[
.panel[.panel-name[Plot]
&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-77-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[Code]

```r
*ggplot(loans, aes(y = homeownership,
                  fill = grade)) +
  geom_bar(position = "fill") +
* labs(
*   x = "Proportion",
*   y = "Homeownership",
*   fill = "Grade",
*   title = "Grades of Lending Club loans",
*   subtitle = "and homeownership of lendee"
* )
```
]
]

---

class: middle

# Relationships between numerical and categorical variables

---

## Already talked about...

- Colouring and faceting histograms and density plots
- Side-by-side box plots

---

## Violin plots


```r
ggplot(loans, aes(x = homeownership, y = loan_amount)) +
  geom_violin()
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-78-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

## Ridge plots


```r
library(ggridges)
ggplot(loans, aes(x = loan_amount, y = grade, fill = grade, color = grade)) + 
  geom_density_ridges(alpha = 0.5)
```

&lt;img src="u2-Jumbo01-u2-01-02-03-04_files/figure-html/unnamed-chunk-79-1.png" width="60%" style="display: block; margin: auto;" /&gt;

---

.your-turn[
.light-blue[.hand[Your turn:]] `AE 03 - Starwars - Dataviz`
- Go to our RStudio Server and start `AE 03 - Starwars - Dataviz`. You will need to start an R project from the repository.
- Open and knit the R Markdown document `starwars.Rmd`, review the document, and fill in the blanks.
]

.your-turn[
- .light-blue[.hand[Followed by:]] `Lab 02 - Plastic Waste`
- Go to our RStudio Server and start `Lab 02 - Plastic Waste`. You will need to start an R project from the repository.
- Open and knit the R Markdown document `lab-02-plastic-waste.Rmd`. 
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightLines": true,
"highlightStyle": "solarized-light",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
